{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link,useNavigate}from'react-router-dom';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const[rfid,setRfid]=useState('');const[error,setError]=useState('');const[loading,setLoading]=useState(false);const navigate=useNavigate();useEffect(()=>{// Check if user is already logged in\nconst user=localStorage.getItem('user');if(user){navigate('/dashboard');}},[navigate]);const handleSubmit=async e=>{e.preventDefault();if(!rfid){setError('Please enter your RFID number');return;}setLoading(true);setError('');try{const response=await axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/api/users/login\"),{rfid});if(response.data.success){localStorage.setItem('user',JSON.stringify(response.data.user));navigate('/dashboard');}}catch(error){if(error.response&&error.response.data){setError(error.response.data.message);}else{setError('An error occurred. Please try again.');}}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{maxWidth:'500px',margin:'100px auto'},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center\",children:\"Smart Parking System\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-center\",children:\"Login\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"rfid\",children:\"RFID Number\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"rfid\",value:rfid,onChange:e=>setRfid(e.target.value),placeholder:\"Enter your RFID number\",disabled:loading})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary btn-block\",disabled:loading,children:loading?'Logging in...':'Login'})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-center mt-3\",children:[\"Don't have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Register\"})]})]})});};export default Login;","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","Login","rfid","setRfid","error","setError","loading","setLoading","navigate","user","localStorage","getItem","handleSubmit","e","preventDefault","response","post","concat","process","env","REACT_APP_API_URL","data","success","setItem","JSON","stringify","message","className","children","style","maxWidth","margin","onSubmit","htmlFor","type","id","value","onChange","target","placeholder","disabled","to"],"sources":["C:/Users/srajp/Desktop/sunday/client/src/components/Login.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nconst Login = () => {\r\n  const [rfid, setRfid] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  \r\n  const navigate = useNavigate();\r\n  \r\n  useEffect(() => {\r\n    // Check if user is already logged in\r\n    const user = localStorage.getItem('user');\r\n    if (user) {\r\n      navigate('/dashboard');\r\n    }\r\n  }, [navigate]);\r\n  \r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!rfid) {\r\n      setError('Please enter your RFID number');\r\n      return;\r\n    }\r\n    \r\n    setLoading(true);\r\n    setError('');\r\n    \r\n    try {\r\n      const response = await axios.post(`${process.env.REACT_APP_API_URL}/api/users/login`, { rfid });\r\n      \r\n      if (response.data.success) {\r\n        localStorage.setItem('user', JSON.stringify(response.data.user));\r\n        navigate('/dashboard');\r\n      }\r\n    } catch (error) {\r\n      if (error.response && error.response.data) {\r\n        setError(error.response.data.message);\r\n      } else {\r\n        setError('An error occurred. Please try again.');\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"card\" style={{ maxWidth: '500px', margin: '100px auto' }}>\r\n        <h2 className=\"text-center\">Smart Parking System</h2>\r\n        <h3 className=\"text-center\">Login</h3>\r\n        \r\n        {error && <div className=\"alert alert-danger\">{error}</div>}\r\n        \r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"rfid\">RFID Number</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"rfid\"\r\n              value={rfid}\r\n              onChange={(e) => setRfid(e.target.value)}\r\n              placeholder=\"Enter your RFID number\"\r\n              disabled={loading}\r\n            />\r\n          </div>\r\n          \r\n          <button \r\n            type=\"submit\" \r\n            className=\"btn btn-primary btn-block\"\r\n            disabled={loading}\r\n          >\r\n            {loading ? 'Logging in...' : 'Login'}\r\n          </button>\r\n        </form>\r\n        \r\n        <p className=\"text-center mt-3\">\r\n          Don't have an account? <Link to=\"/register\">Register</Link>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}